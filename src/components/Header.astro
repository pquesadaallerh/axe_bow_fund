---
import { site, type SiteNavItem } from "../content/site";

const { brand = site.name, nav = site.nav } = Astro.props as {
  brand?: string;
  nav?: SiteNavItem[];
};

const path = Astro.url.pathname;
const isActive = (href: string) => (href === "/" ? path === "/" : path.startsWith(href));
---

<header class="header">
  <div class="header__inner">
    <a class="header__brand" href={import.meta.env.BASE_URL}>{brand}</a>

    <nav class="header__nav" aria-label="Primary">
      <ul class="nav">
        {nav.map((item) => (
          <li class="nav__item">
            <a class={`nav__link ${isActive(item.href) ? "is-active" : ""}`} href={item.href}>
              {item.label}
            </a>
          </li>
        ))}
      </ul>
    </nav>
  </div>
</header>
